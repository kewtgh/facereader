/* ============================================================
 * 1. 全站基础微调
 * ========================================================== */

/* 文章标题行距舒展一点 */
.page__title {
  line-height: 1.25;
}

/* 引用 blockquote 优化（字体、背景、边线） */
.page__content blockquote {
  margin: 1.5rem 0;
  padding: 0.9rem 1.1rem 0.9rem 1.2rem;
  border-inline-start: 4px solid $primary-color;
  background: mix($background-color, #ffffff, 70%);
  border-radius: 0.5rem;
  font-family: $serif;
  font-style: normal;
  font-size: 1.02em;
  color: darken($text-color, 5%);
  position: relative;
}

.page__content blockquote p {
  margin: 0.3rem 0;
}

.page__content blockquote p:last-child {
  margin-bottom: 0;
}

/* 引号装饰 */
.page__content blockquote::before {
  content: "“";
  position: absolute;
  inset-inline-start: 0.4rem;
  inset-block-start: 0.1rem;
  font-family: $serif;
  font-size: 2.6rem;
  line-height: 1;
  color: rgba($primary-color, 0.2);
  pointer-events: none;
}

/* ============================================================
 * 2. 首页 Hero 两个按钮 & 手机端优化
 * ========================================================== */

/* 统一 Hero 里两个按钮的区块（page__hero.html 中 actions 容器） */
.page__hero--overlay .page__hero-actions {
  margin-top: 1.2rem;
  display: flex;
  flex-wrap: wrap;
  gap: 0.8rem;
}

/* 基础按钮形态：两个按钮同样的 pill 风格和宽度 */
.page__hero--overlay .page__hero-actions .btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.65rem 1.6rem;
  border-radius: 999px;
  font-size: 0.97rem;
  font-weight: 500;
  min-width: 230px; /* 统一宽度，避免一大一小 */
  text-align: center;
}

/* 主按钮：白底+蓝字，阴影稍减弱 */
.page__hero--overlay .page__hero-actions .btn--primary {
  background-color: #ffffff;
  border-color: #ffffff;
  color: #3375ff !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.14); /* 比之前 0 8px 20 更柔和 */
}

.page__hero--overlay .page__hero-actions .btn--primary:hover,
.page__hero--overlay .page__hero-actions .btn--primary:focus {
  background-color: rgba(255, 255, 255, 0.96);
  border-color: rgba(255, 255, 255, 0.96);
  color: #2758c8 !important;
}

/* 次按钮：浅色描边，轻微阴影即可 */
.page__hero--overlay .page__hero-actions .btn--secondary {
  background-color: transparent;
  border-color: rgba(255, 255, 255, 0.86);
  color: #ffffff !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
}

.page__hero--overlay .page__hero-actions .btn--secondary:hover,
.page__hero--overlay .page__hero-actions .btn--secondary:focus {
  background-color: rgba(255, 255, 255, 0.08);
}

/* 手机端 Hero 收紧一点整体间距和字号 */
@include breakpoint($small) {
  .page__hero--overlay {
    padding-block: 2.4rem 2.6rem;
  }

  .page__hero--overlay .page__title {
    font-size: 1.7rem;
    line-height: 1.25;
    margin-bottom: 0.55rem;
  }

  .page__hero--overlay .page__lead {
    font-size: 0.95rem;
    max-width: 22rem;
  }

  /* 手机上按钮竖排，更像“胶囊”按钮 */
  .page__hero--overlay .page__hero-actions {
    flex-direction: column;
    gap: 0.55rem;
  }

  .page__hero--overlay .page__hero-actions .btn {
    min-height: 2.4rem;
    padding-inline: 1.3rem;
    border-radius: 999px;
    min-width: 70%;
    max-width: 280px;
  }
}

/* ============================================================
 * 3. 首页 feature_row 三张卡片等高 + 按钮对齐
 * ========================================================== */

@include breakpoint($medium) {
  .feature__wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
  }

  .feature__item {
    float: none;
    margin-right: 0;
    flex: 1 1 0;
    display: flex;
  }

  .feature__item .archive__item {
    display: flex;
    flex-direction: column;
    width: 100%;
  }

  .feature__item .archive__item-body {
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
  }

  .feature__item .archive__item-body > *:last-child {
    margin-top: auto; /* 按钮顶到底部 */
  }
}

/* feature_row 卡片：按钮不要太贴底部 */
.feature__item .btn {
  margin-top: 0.75rem;
}

/* ============================================================
 * 4. 首页 About 卡片 CTA（图文）保持之前的风格
 * ========================================================== */

.home-section--about-cta {
  margin: 2.5rem 0 3rem;
  clear: both;
}

.home-cta {
  padding: 1.75rem 1.5rem;
  border-radius: 1.25rem;
  background: mix(#ffffff, $background-color, 80%);
  border: 1px solid mix(#000000, $border-color, 6%);
  box-shadow: 0 6px 18px rgba(15, 23, 42, 0.04);
}

/* About 这张卡片整体宽度与居中 */
.home-cta--about {
  max-width: 980px;
  margin-left: auto;
  margin-right: auto;
}

.home-cta--about .home-cta__inner {
  display: flex;
  align-items: center;
  gap: 1.75rem;
}

/* 左侧图片区域 */
.home-cta--about .home-cta__media {
  flex: 0 0 36%;
}

.home-cta--about .home-cta__media img {
  display: block;
  width: 100%;
  height: 100%;
  max-height: 260px;
  object-fit: cover;
  border-radius: 1rem;
}

/* 右侧文字区域 */
.home-cta--about .home-cta__text {
  flex: 1 1 auto;
}

.home-cta--about .home-cta__text h2 {
  font-weight: 600;
  font-size: 1.4rem;
  line-height: 1.4;
  margin-bottom: 0.6rem;
}

.home-cta--about .home-cta__text p {
  font-size: 0.95rem;
  margin-bottom: 1.1rem;
  line-height: 1.7;
}

/* 按钮稍微离文字远一点 */
.home-cta--about .btn--primary {
  margin-top: 0.75rem;
  min-width: 170px;
}

/* 小屏幕：上下排布 */
@include breakpoint($small) {
  .home-section--about-cta {
    margin: 2.4rem 0 2.8rem;
  }

  .home-cta.home-cta--about {
    padding: 1.5rem 1.5rem;
  }

  .home-cta--about .home-cta__inner {
    flex-direction: column;
    align-items: stretch;
  }

  .home-cta--about .home-cta__media img {
    max-height: 220px;
  }
}

/* ============================================================
 * 5. 文章阅读页整体宽度微调（让阅读区不那么窄）
 * ========================================================== */

/* 大屏时整体页面略放宽一点 */
@include breakpoint($x-large) {
  .layout--single .page {
    max-width: 1240px; /* 默认是 $x-large，可适当放大一点 */
  }
}

/* ============================================================
 * 6. 文章页侧栏：作者卡片 + 专题栏美化
 * ========================================================== */

/* 只在单篇文章布局里生效 */
.layout--single .sidebar.sticky {
  /* 如果未来要精确控制宽度，可以在这里加 max-width */
}

/* ----- 作者卡片 ----- */

.layout--single .sidebar .h-card {
  padding: 1.4rem 1.1rem 1.25rem;
  border-radius: 1.1rem;
  background: mix(#ffffff, $background-color, 85%);
  border: 1px solid mix(#000000, $border-color, 5%);
  box-shadow: 0 4px 14px rgba(15, 23, 42, 0.04);
  text-align: center;
}

.layout--single .sidebar .author__avatar {
  width: 80px;
  height: 80px;
  margin: 0 auto 0.75rem;
}

.layout--single .sidebar .author__avatar img {
  border-radius: 50%;
}

.layout--single .sidebar .author__name {
  font-size: 1rem;
  margin-bottom: 0.25rem;
}

.layout--single .sidebar .author__bio {
  font-size: 0.9rem;
  line-height: 1.6;
  color: $muted-text-color;
}

/* 社交链接：压缩行距；隐藏“Follow”按钮 */
.layout--single .sidebar .author__urls-wrapper {
  margin-top: 0.9rem;
}

.layout--single .sidebar .author__urls-wrapper > .btn {
  display: none;
}

.layout--single .sidebar .author__urls {
  font-size: 0.9rem;
}

.layout--single .sidebar .author__urls li {
  margin-bottom: 0.18rem;
}

/* ----- 左侧专题目录（nav_list）----- */

/* 整个专题列表做成一张卡片，和作者卡片风格统一 */
.layout--single .sidebar .nav__list {
  margin: 1.4rem 0 0;
  padding: 1rem 1.1rem 0.9rem;
  border-radius: 1.1rem;
  background: mix(#ffffff, $background-color, 88%);
  border: 1px solid mix(#000000, $border-color, 5%);
  box-shadow: 0 3px 10px rgba(15, 23, 42, 0.04);
}

/* 第一块专题与作者卡片之间加一条细线 */
.layout--single .sidebar .h-card + .nav__list {
  margin-top: 1.2rem;
}

/* 专题大标题（例如“经典系列”“企业剖析”） */
.layout--single .sidebar .nav__title {
  margin: 0 0 0.4rem;
  padding: 0;
  font-family: $sans-serif;
  font-size: 1.02rem;
  font-weight: 600;
}

/* 专题小标题（例如“新能源车”“通用电气大盘点”） */
.layout--single .sidebar .nav__sub-title {
  display: block;
  margin: 0.6rem 0 0.35rem;
  padding: 0;
  font-family: $sans-serif;
  font-size: 0.98rem;
  font-weight: 600;
  text-transform: none; /* 取消全大写，更适合中文 */
  border-bottom: none;
}

/* 专题条目列表：字号接近正文，看起来不那么“小一号” */
.layout--single .sidebar .nav__items {
  margin: 0 0 0.6rem;
  font-size: 0.98rem;
  line-height: 1.8;
}

/* 链接颜色更接近正文，悬停稍微变蓝 */
.layout--single .sidebar .nav__items a {
  color: $text-color;

  &:hover {
    color: $link-color;
  }
}

/* ============================================================
 * 7. 右侧 TOC 小优化（不改变宽度）
 * ========================================================== */

/* TOC 字号稍微小一点，行距舒适；长标题允许断行 */
.layout--single .sidebar .toc__menu {
  font-size: 0.92rem;
  line-height: 1.6;
}

.layout--single .sidebar .toc__menu a {
  word-break: break-word;
}

/* 子级条目略微缩进，层级感更清晰 */
.layout--single .sidebar .toc__menu li ul > li a {
  padding-inline-start: 1.2rem;
}

/* ============================================================
 * 8. 图片说明与图片间距再收紧一点
 * ========================================================== */

/* 统一控制 figure 块底部间距 */
.page__content figure {
  margin-bottom: 1.1rem; /* 比默认略紧凑 */
}

/* 图像和说明之间的距离进一步缩短 */
.page__content figure > img {
  display: block;
  margin-bottom: 0.25rem;
}

/* figcaption 更贴近图片，上下都稍紧凑 */
.page__content figure > figcaption {
  margin-top: 0;          /* 去掉额外的 margin-top */
  margin-bottom: 0.75rem; /* 与后面正文的间距 */
}

/* 如果是用 .image-caption 这种写法，也一并处理 */
.page__content .image-caption,
.page__content em.image-caption,
.page__content p.image-caption {
  display: block;
  margin-top: 0.25rem;
  margin-bottom: 0.75rem;
  text-align: center;
}
